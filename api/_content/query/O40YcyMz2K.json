{"_path":"/til/javascript-error-logging","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Logando erros em javascript","description":"Como detectar e registar erros em javascript.","excerpt":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"função-de-captura-de-erro"},"children":[{"type":"text","value":"Função de captura de erro"}]},{"type":"element","tag":"code","props":{"code":"window.onerror = function (msg, url, lineNo, columnNo, error) {\n  // msg - mensagem de erro (p.e. Uncaught ReferenceError: foot is not defined)\n  // url - script associado ao erro (p.e. /dist/app.js)\n  // lineNo - número da linha se disponível\n  // columnNo - número da coluna se disponível\n  // error - objeto de erro se disponível\n\n  // trate o erro aqui\n\n  return false;\n}\n","language":"javascript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"window.onerror = function (msg, url, lineNo, columnNo, error) {\n  // msg - mensagem de erro (p.e. Uncaught ReferenceError: foot is not defined)\n  // url - script associado ao erro (p.e. /dist/app.js)\n  // lineNo - número da linha se disponível\n  // columnNo - número da coluna se disponível\n  // error - objeto de erro se disponível\n\n  // trate o erro aqui\n\n  return false;\n}\n"}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Retornar "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"true"}]},{"type":"text","value":" não deixa disparar o default handler"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Retornar "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"false"}]},{"type":"text","value":" deixa o default handler executar"}]}]},{"type":"element","tag":"h2","props":{"id":"transmitindo-o-erro-para-o-servidor"},"children":[{"type":"text","value":"Transmitindo o erro para o servidor"}]},{"type":"element","tag":"code","props":{"code":"function captureError(ex) {\n  var errorData = {\n    name: ex.name, // e.g. ReferenceError\n    message: ex.line, // e.g. x is undefined\n    url: document.location.href,\n    stack: ex.stack // stacktrace string; remember, different per-browser!\n  };\n\n  $.post('/logger/js/', {\n    data: errorData\n  });\n}\n","language":"javascript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"function captureError(ex) {\n  var errorData = {\n    name: ex.name, // e.g. ReferenceError\n    message: ex.line, // e.g. x is undefined\n    url: document.location.href,\n    stack: ex.stack // stacktrace string; remember, different per-browser!\n  };\n\n  $.post('/logger/js/', {\n    data: errorData\n  });\n}\n"}]}]}]},{"type":"element","tag":"h2","props":{"id":"referências"},"children":[{"type":"text","value":"Referências"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://blog.sentry.io/2016/01/04/client-javascript-reporting-window-onerror","rel":["nofollow"]},"children":[{"type":"text","value":"Capture and report JavaScript errors with window.onerror"}]}]}]}]},"date":"2020-02-17T00:00:00.000Z","draft":true,"tags":["javascript"],"Thumbnail":"img/headers/javascript.jpg","body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"função-de-captura-de-erro"},"children":[{"type":"text","value":"Função de captura de erro"}]},{"type":"element","tag":"code","props":{"code":"window.onerror = function (msg, url, lineNo, columnNo, error) {\n  // msg - mensagem de erro (p.e. Uncaught ReferenceError: foot is not defined)\n  // url - script associado ao erro (p.e. /dist/app.js)\n  // lineNo - número da linha se disponível\n  // columnNo - número da coluna se disponível\n  // error - objeto de erro se disponível\n\n  // trate o erro aqui\n\n  return false;\n}\n","language":"javascript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d064d8"},"children":[{"type":"text","value":"window."}]},{"type":"element","tag":"span","props":{"class":"ct-aeda95"},"children":[{"type":"text","value":"onerror"}]},{"type":"element","tag":"span","props":{"class":"ct-d064d8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-753c8e"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-d064d8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0021d9"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-d064d8"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-2e9a4e"},"children":[{"type":"text","value":"msg"}]},{"type":"element","tag":"span","props":{"class":"ct-d064d8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-2e9a4e"},"children":[{"type":"text","value":"url"}]},{"type":"element","tag":"span","props":{"class":"ct-d064d8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-2e9a4e"},"children":[{"type":"text","value":"lineNo"}]},{"type":"element","tag":"span","props":{"class":"ct-d064d8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-2e9a4e"},"children":[{"type":"text","value":"columnNo"}]},{"type":"element","tag":"span","props":{"class":"ct-d064d8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-2e9a4e"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"class":"ct-d064d8"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d064d8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-11d910"},"children":[{"type":"text","value":"// msg - mensagem de erro (p.e. Uncaught ReferenceError: foot is not defined)"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d064d8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-11d910"},"children":[{"type":"text","value":"// url - script associado ao erro (p.e. /dist/app.js)"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d064d8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-11d910"},"children":[{"type":"text","value":"// lineNo - número da linha se disponível"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d064d8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-11d910"},"children":[{"type":"text","value":"// columnNo - número da coluna se disponível"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d064d8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-11d910"},"children":[{"type":"text","value":"// error - objeto de erro se disponível"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d064d8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-11d910"},"children":[{"type":"text","value":"// trate o erro aqui"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d064d8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-753c8e"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-d064d8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d59f0b"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-d064d8"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d064d8"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Retornar "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"true"}]},{"type":"text","value":" não deixa disparar o default handler"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Retornar "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"false"}]},{"type":"text","value":" deixa o default handler executar"}]}]},{"type":"element","tag":"h2","props":{"id":"transmitindo-o-erro-para-o-servidor"},"children":[{"type":"text","value":"Transmitindo o erro para o servidor"}]},{"type":"element","tag":"code","props":{"code":"function captureError(ex) {\n  var errorData = {\n    name: ex.name, // e.g. ReferenceError\n    message: ex.line, // e.g. x is undefined\n    url: document.location.href,\n    stack: ex.stack // stacktrace string; remember, different per-browser!\n  };\n\n  $.post('/logger/js/', {\n    data: errorData\n  });\n}\n","language":"javascript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0021d9"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-d064d8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-aeda95"},"children":[{"type":"text","value":"captureError"}]},{"type":"element","tag":"span","props":{"class":"ct-d064d8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-2e9a4e"},"children":[{"type":"text","value":"ex"}]},{"type":"element","tag":"span","props":{"class":"ct-d064d8"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d064d8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-0021d9"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-d064d8"},"children":[{"type":"text","value":" errorData "}]},{"type":"element","tag":"span","props":{"class":"ct-753c8e"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-d064d8"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d064d8"},"children":[{"type":"text","value":"    name: ex.name, "}]},{"type":"element","tag":"span","props":{"class":"ct-11d910"},"children":[{"type":"text","value":"// e.g. ReferenceError"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d064d8"},"children":[{"type":"text","value":"    message: ex.line, "}]},{"type":"element","tag":"span","props":{"class":"ct-11d910"},"children":[{"type":"text","value":"// e.g. x is undefined"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d064d8"},"children":[{"type":"text","value":"    url: document.location.href,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d064d8"},"children":[{"type":"text","value":"    stack: ex.stack "}]},{"type":"element","tag":"span","props":{"class":"ct-11d910"},"children":[{"type":"text","value":"// stacktrace string; remember, different per-browser!"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d064d8"},"children":[{"type":"text","value":"  };"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d064d8"},"children":[{"type":"text","value":"  $."}]},{"type":"element","tag":"span","props":{"class":"ct-aeda95"},"children":[{"type":"text","value":"post"}]},{"type":"element","tag":"span","props":{"class":"ct-d064d8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-4b986d"},"children":[{"type":"text","value":"'/logger/js/'"}]},{"type":"element","tag":"span","props":{"class":"ct-d064d8"},"children":[{"type":"text","value":", {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d064d8"},"children":[{"type":"text","value":"    data: errorData"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d064d8"},"children":[{"type":"text","value":"  });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d064d8"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"referências"},"children":[{"type":"text","value":"Referências"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://blog.sentry.io/2016/01/04/client-javascript-reporting-window-onerror","rel":["nofollow"]},"children":[{"type":"text","value":"Capture and report JavaScript errors with window.onerror"}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-4b986d{color:#E6DB74}.ct-d59f0b{color:#AE81FF}.ct-11d910{color:#88846F}.ct-2e9a4e{color:#FD971F}.ct-0021d9{color:#66D9EF}.ct-753c8e{color:#F92672}.ct-aeda95{color:#A6E22E}.ct-d064d8{color:#F8F8F2}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"função-de-captura-de-erro","depth":2,"text":"Função de captura de erro"},{"id":"transmitindo-o-erro-para-o-servidor","depth":2,"text":"Transmitindo o erro para o servidor"},{"id":"referências","depth":2,"text":"Referências"}]}},"_type":"markdown","_id":"content:til:javascript-error-logging.md","_source":"content","_file":"til/javascript-error-logging.md","_extension":"md"}