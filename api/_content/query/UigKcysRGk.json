[{"_path":"/til/como-trocar-hostname-sem-reiniciar","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Como trocar o nome do servidor sem reiniciar","description":"Como um Administrador de Sistemas, as vezes, você precisa alterar\no nome da máquina. Seja porque digitou o nome errado durante a\ninstalação, ou se a política de nomes da empresa mudou ou se o nome já estava\nsendo utilizado por outra máquina.","excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Como um "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Administrador de Sistemas"}]},{"type":"text","value":", as vezes, você precisa alterar\no nome da máquina. Seja porque digitou o nome errado durante a\ninstalação, ou se a política de nomes da empresa mudou ou se o nome já estava\nsendo utilizado por outra máquina."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Nota:"}]},{"type":"text","value":" O procedimento que veremos a seguir vale para as distribuições Linux\nderivadas do "},{"type":"element","tag":"a","props":{"href":"https://www.debian.org","rel":["nofollow"]},"children":[{"type":"text","value":"Debian"}]},{"type":"text","value":", tais como\n"},{"type":"element","tag":"a","props":{"href":"https://linuxmint.com","rel":["nofollow"]},"children":[{"type":"text","value":"Mint"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"https://www.ubuntu.com","rel":["nofollow"]},"children":[{"type":"text","value":"Ubuntu"}]},{"type":"text","value":", e outras 130\n(segundo o "},{"type":"element","tag":"a","props":{"href":"https://distrowatch.com/search.php?basedon=Debian","rel":["nofollow"]},"children":[{"type":"text","value":"distrowatch"}]},{"type":"text","value":")."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"O arquivo de sistema que guarda o nome da máquina para ser usado a cada boot\né o "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/etc/hostname"}]},{"type":"text","value":", então basta trocar seu conteúdo que no "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"próximo boot"}]},{"type":"text","value":"\na máquina terá outro nome."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Uma opção bem simples de edição, já que o conteúdo deste arquivo é somente uma\npalavra, é enviar através do comando "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"echo"}]},{"type":"text","value":" o novo nome para o arquivo "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/etc/hostname"}]},{"type":"text","value":":"}]},{"type":"element","tag":"code","props":{"code":"echo \"novo-nome\" > /etc/hostname\n","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"echo \"novo-nome\" > /etc/hostname\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Para o próximo boot está tudo OK!"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Se verificarmos a configuração a com o comando "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"hostname"}]},{"type":"text","value":" veremos que ainda\nmostra o nome antigo. Mas a máquina já está rodando e não posso parar os\nserviços agora para fazer o reboot, então precisamos alterar o "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"kernel"}]},{"type":"text","value":" em execução."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Sem pânico! Felizmente existe um modo muito\nsimple editar variáveis do "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"kernel"}]},{"type":"text","value":". Ele expõe muitas de suas configurações\natravés de um "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"sistema de arquivos"}]},{"type":"text","value":" montado em "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/proc/sys/kernel"}]},{"type":"text","value":". Vamos usar\no mesmo comando "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"echo"}]},{"type":"text","value":" para alterar o arquivo "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/proc/sys/kernel/hostname"}]},{"type":"text","value":"."}]},{"type":"element","tag":"code","props":{"code":"echo \"novo-nome\" > /proc/sys/kernel/hostname\n","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"echo \"novo-nome\" > /proc/sys/kernel/hostname\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Agora se lançarmos o comando "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"hostname"}]},{"type":"text","value":" novamente veremos o novo nome e sem que seja\npreciso reiniciar a máquina."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Verifique se no arquivo "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/etc/hosts"}]},{"type":"text","value":" não existe nenhuma menção ao antigo nome,\nse existir atualize este arquivo. Para atualizar o "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/etc/hosts"}]},{"type":"text","value":" pela linha de\ncomando faça o seguinte:"}]},{"type":"element","tag":"code","props":{"code":"sed -i \"s/antigo-nome/novo-nome/g\" /etc/hosts\n","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"sed -i \"s/antigo-nome/novo-nome/g\" /etc/hosts\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"O "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"sed"}]},{"type":"text","value":" é um editor de fluxo de texto que utiliza expressões regulares para editar textos de forma automatizada.\nUma explicação muito breve sobre o comando acima:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-i"}]},{"type":"text","value":": modo de edição "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"inline"}]},{"type":"text","value":" (abre, edita e fecha o arquivo)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"s"}]},{"type":"text","value":": comando de substituição no formato "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/de/para/"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"g"}]},{"type":"text","value":": substitui todas as ocorrências de "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"antigo-nome"}]},{"type":"text","value":" por "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"novo-nome"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"binding","props":{"value":"< comment >"},"children":[]},{"type":"text","value":"\nThis is a comment that will not be rendered."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"binding","props":{"value":"< /comment >"},"children":[]}]}]},"date":"2017-10-22T13:21:50.000Z","draft":false,"tags":["sysadmin","linux","debian","hostname"],"Thumbnail":"img/headers/sysadmin.jpg","body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Como um "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Administrador de Sistemas"}]},{"type":"text","value":", as vezes, você precisa alterar\no nome da máquina. Seja porque digitou o nome errado durante a\ninstalação, ou se a política de nomes da empresa mudou ou se o nome já estava\nsendo utilizado por outra máquina."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Nota:"}]},{"type":"text","value":" O procedimento que veremos a seguir vale para as distribuições Linux\nderivadas do "},{"type":"element","tag":"a","props":{"href":"https://www.debian.org","rel":["nofollow"]},"children":[{"type":"text","value":"Debian"}]},{"type":"text","value":", tais como\n"},{"type":"element","tag":"a","props":{"href":"https://linuxmint.com","rel":["nofollow"]},"children":[{"type":"text","value":"Mint"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"https://www.ubuntu.com","rel":["nofollow"]},"children":[{"type":"text","value":"Ubuntu"}]},{"type":"text","value":", e outras 130\n(segundo o "},{"type":"element","tag":"a","props":{"href":"https://distrowatch.com/search.php?basedon=Debian","rel":["nofollow"]},"children":[{"type":"text","value":"distrowatch"}]},{"type":"text","value":")."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"O arquivo de sistema que guarda o nome da máquina para ser usado a cada boot\né o "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/etc/hostname"}]},{"type":"text","value":", então basta trocar seu conteúdo que no "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"próximo boot"}]},{"type":"text","value":"\na máquina terá outro nome."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Uma opção bem simples de edição, já que o conteúdo deste arquivo é somente uma\npalavra, é enviar através do comando "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"echo"}]},{"type":"text","value":" o novo nome para o arquivo "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/etc/hostname"}]},{"type":"text","value":":"}]},{"type":"element","tag":"code","props":{"code":"echo \"novo-nome\" > /etc/hostname\n","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2a0664"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-1da94a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b07815"},"children":[{"type":"text","value":"\"novo-nome\""}]},{"type":"element","tag":"span","props":{"class":"ct-1da94a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-59404d"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-1da94a"},"children":[{"type":"text","value":" /etc/hostname"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Para o próximo boot está tudo OK!"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Se verificarmos a configuração a com o comando "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"hostname"}]},{"type":"text","value":" veremos que ainda\nmostra o nome antigo. Mas a máquina já está rodando e não posso parar os\nserviços agora para fazer o reboot, então precisamos alterar o "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"kernel"}]},{"type":"text","value":" em execução."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Sem pânico! Felizmente existe um modo muito\nsimple editar variáveis do "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"kernel"}]},{"type":"text","value":". Ele expõe muitas de suas configurações\natravés de um "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"sistema de arquivos"}]},{"type":"text","value":" montado em "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/proc/sys/kernel"}]},{"type":"text","value":". Vamos usar\no mesmo comando "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"echo"}]},{"type":"text","value":" para alterar o arquivo "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/proc/sys/kernel/hostname"}]},{"type":"text","value":"."}]},{"type":"element","tag":"code","props":{"code":"echo \"novo-nome\" > /proc/sys/kernel/hostname\n","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2a0664"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-1da94a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b07815"},"children":[{"type":"text","value":"\"novo-nome\""}]},{"type":"element","tag":"span","props":{"class":"ct-1da94a"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-59404d"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-1da94a"},"children":[{"type":"text","value":" /proc/sys/kernel/hostname"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Agora se lançarmos o comando "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"hostname"}]},{"type":"text","value":" novamente veremos o novo nome e sem que seja\npreciso reiniciar a máquina."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Verifique se no arquivo "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/etc/hosts"}]},{"type":"text","value":" não existe nenhuma menção ao antigo nome,\nse existir atualize este arquivo. Para atualizar o "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/etc/hosts"}]},{"type":"text","value":" pela linha de\ncomando faça o seguinte:"}]},{"type":"element","tag":"code","props":{"code":"sed -i \"s/antigo-nome/novo-nome/g\" /etc/hosts\n","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1da94a"},"children":[{"type":"text","value":"sed -i "}]},{"type":"element","tag":"span","props":{"class":"ct-b07815"},"children":[{"type":"text","value":"\"s/antigo-nome/novo-nome/g\""}]},{"type":"element","tag":"span","props":{"class":"ct-1da94a"},"children":[{"type":"text","value":" /etc/hosts"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"O "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"sed"}]},{"type":"text","value":" é um editor de fluxo de texto que utiliza expressões regulares para editar textos de forma automatizada.\nUma explicação muito breve sobre o comando acima:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-i"}]},{"type":"text","value":": modo de edição "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"inline"}]},{"type":"text","value":" (abre, edita e fecha o arquivo)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"s"}]},{"type":"text","value":": comando de substituição no formato "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/de/para/"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"g"}]},{"type":"text","value":": substitui todas as ocorrências de "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"antigo-nome"}]},{"type":"text","value":" por "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"novo-nome"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"binding","props":{"value":"< comment >"},"children":[]},{"type":"text","value":"\nThis is a comment that will not be rendered."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"binding","props":{"value":"< /comment >"},"children":[]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-59404d{color:#F92672}.ct-b07815{color:#E6DB74}.ct-1da94a{color:#F8F8F2}.ct-2a0664{color:#66D9EF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:til:como-trocar-hostname-sem-reiniciar.md","_source":"content","_file":"til/como-trocar-hostname-sem-reiniciar.md","_extension":"md"}]