<!DOCTYPE html>
<html lang="pt-br">

<head>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0" />
<base href="https://geraldo.dev/">
<title>Como trocar o nome do servidor sem reiniciar | geraldo.dev</title>
<link rel="canonical" href="https://geraldo.dev/posts/trocar-hostname-sem-reiniciar/">
<meta name="generator" content="Hugo 0.54.0" />


    <meta property="og:type" content="article" />
    <meta property="article:published_time" content="22/10/2017">



    <meta property="og:image" content="https://geraldo.dev/img/open_graph_02_1200x1200.png" />
<meta property="og:description" content="Como um **Administrador de Sistemas**, as vezes, você precisa alterar
o nome da máquina. Seja porque digitou o nome errado durante a
instalação, ou se a política de nomes da empresa mudou ou se o nome já estava
sendo utilizado por outra máquina.
" /><meta property="og:url" content="https://geraldo.dev/posts/trocar-hostname-sem-reiniciar/" />
    <meta property="og:site_name" content="geraldo.dev" />
    <meta property="og:title" content="Como trocar o nome do servidor sem reiniciar" />


    <meta property="og:tags" content="sysadmin" />

    <meta property="og:tags" content="linux" />

    <meta property="og:tags" content="debian" />

    <meta property="og:tags" content="hostname" />



<meta name="description" content="Como um **Administrador de Sistemas**, as vezes, você precisa alterar
o nome da máquina. Seja porque digitou o nome errado durante a
instalação, ou se a política de nomes da empresa mudou ou se o nome já estava
sendo utilizado por outra máquina.
">
<meta name="author" content="Geraldo Ribeiro">

<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<link rel="stylesheet" href="https://cdn.materialdesignicons.com/2.8.94/css/materialdesignicons.min.css">


<link rel="stylesheet"
      href="https://geraldo.dev/style.main.min.f64f63d8a044544096f25f0883533eb70d59deb3d767596a2156d5a6e4ffc179.css"
      integrity="sha256-9k9j2KBEVECW8l8Ig1M&#43;tw1Z3rPXZ1lqIVbVpuT/wXk="
      media="screen">



</head>

<body>
    
        <header>
            <nav class="light-blue lighten-1" role="navigation">
    <div class="nav-wrapper container">
        <a id="logo-container" href="https://geraldo.dev/" class="brand-logo">geraldo.dev</a>


        <a href="#" data-target="mobile-demo" class="sidenav-trigger"><i class="material-icons">menu</i></a>
        <ul class="right hide-on-med-and-down">
            
<li><a href="/">Home</a></li>

<li><a href="/posts">Posts</a></li>

<li><a href="/publications">Publicações</a></li>

<li><a href="/projects">Projetos</a></li>


        </ul>
    </div>
</nav>

<ul class="sidenav" id="mobile-demo">
  
<li><a href="/">Home</a></li>

<li><a href="/posts">Posts</a></li>

<li><a href="/publications">Publicações</a></li>

<li><a href="/projects">Projetos</a></li>


</ul>


        </header>
    

    
    <main>
      <div class="page container">

        
        <div class="project-header">
          <img src="/img/headers/sysadmin.jpg" class="responsive-img">
        </div>
        

        <h1>Como trocar o nome do servidor sem reiniciar</h1>

        <p>Como um <strong>Administrador de Sistemas</strong>, as vezes, você precisa alterar
o nome da máquina. Seja porque digitou o nome errado durante a
instalação, ou se a política de nomes da empresa mudou ou se o nome já estava
sendo utilizado por outra máquina.</p>

<p><strong>Nota:</strong> O procedimento que veremos a seguir vale para as distribuições Linux
derivadas do <a href="https://www.debian.org" target="_blank">Debian</a>, tais como
<a href="https://linuxmint.com" target="_blank">Mint</a>, <a href="https://www.ubuntu.com" target="_blank">Ubuntu</a>, e outras 130
(segundo o <a href="https://distrowatch.com/search.php?basedon=Debian" target="_blank">distrowatch</a>).</p>

<p>O arquivo de sistema que guarda o nome da máquina para ser usado a cada boot
é o <code>/etc/hostname</code>, então basta trocar seu conteúdo que no <strong>próximo boot</strong>
a máquina terá outro nome.</p>

<p>Uma opção bem simples de edição, já que o conteúdo deste arquivo é somente uma
palavra, é enviar através do comando <code>echo</code> o novo nome para o arquivo <code>/etc/hostname</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">echo <span style="color:#e6db74">&#34;novo-nome&#34;</span> &gt; /etc/hostname</code></pre></div>
<p><strong>Para o próximo boot está tudo OK!</strong></p>

<p>Se verificarmos a configuração a com o comando <code>hostname</code> veremos que ainda
mostra o nome antigo. Mas a máquina já está rodando e não posso parar os
serviços agora para fazer o reboot, então precisamos alterar o <em>kernel</em> em execução.</p>

<p>Sem pânico! Felizmente existe um modo muito
simple editar variáveis do <em>kernel</em>. Ele expõe muitas de suas configurações
através de um <em>sistema de arquivos</em> montado em <code>/proc/sys/kernel</code>. Vamos usar
o mesmo comando <code>echo</code> para alterar o arquivo <code>/proc/sys/kernel/hostname</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">echo <span style="color:#e6db74">&#34;novo-nome&#34;</span> &gt; /proc/sys/kernel/hostname</code></pre></div>
<p>Agora se lançarmos o comando <code>hostname</code> novamente veremos o novo nome e sem que seja
preciso reiniciar a máquina.</p>

<p>Verifique se no arquivo <code>/etc/hosts</code> não existe nenhuma menção ao antigo nome,
se existir atualize este arquivo. Para atualizar o <code>/etc/hosts</code> pela linha de
comando faça o seguinte:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sed -i <span style="color:#e6db74">&#34;s/antigo-nome/novo-nome/g&#34;</span> /etc/hosts</code></pre></div>
<p>O <code>sed</code> é um editor de fluxo de texto que utiliza expressões regulares para editar textos de forma automatizada.
Uma explicação muito breve sobre o comando acima:</p>

<ul>
<li><code>-i</code>: modo de edição <code>inline</code> (abre, edita e fecha o arquivo)</li>
<li><code>s</code>: comando de substituição no formato <code>/de/para/</code></li>
<li><code>g</code>: substitui todas as ocorrências de <code>antigo-nome</code> por <code>novo-nome</code></li>
</ul>


        
<div id="sharing">
  <a href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fgeraldo.dev%2fposts%2ftrocar-hostname-sem-reiniciar%2f" aria-label="share on Facebook" target="_blank">
    <span class="mdi mdi-24px mdi-facebook"></span>
  </a>
</div>



      </div>

    </main>


    
        <footer class="page-footer orange">
  <div class="container">
    <div class="row">
      <div class="col l9 s12">
        <h5 class="white-text">Você tem uma grande ideia?</h5>
        <p class="grey-text text-lighten-4">
          <ul>
            
          </ul>
        </p>

        <p class="grey-text text-lighten-4">
          Vamos marcar um café, talvez a solução seja muito mais simples do que você imagina.
        </p>
      </div>
      <div class="col l3 s12">
        <h5 class="white-text">Contatos</h5>
        <ul>
        
          <li>
            <a class="white-text" href="https://geraldo.dev">
              <span class="mdi mdi-24px mdi-web"></span>
              https://geraldo.dev
            </a>
          </li>
        
          <li>
            <a class="white-text" href="https://api.whatsapp.com/send?phone=5512982302703&amp;text=Ol%c3%a1%20Geraldo!">
              <span class="mdi mdi-24px mdi-whatsapp"></span>
              (12) 9 8230 2703
            </a>
          </li>
        
          <li>
            <a class="white-text" href="https://twitter.com/geraldo_dev">
              <span class="mdi mdi-24px mdi-twitter"></span>
              geraldo_dev
            </a>
          </li>
        
          <li>
            <a class="white-text" href="https://www.instagram.com/geraldo.dev/">
              <span class="mdi mdi-24px mdi-instagram"></span>
              geraldo.dev
            </a>
          </li>
        
          <li>
            <a class="white-text" href="https://www.linkedin.com/in/geraldolsribeiro/">
              <span class="mdi mdi-24px mdi-linkedin"></span>
              geraldolsribeiro
            </a>
          </li>
        
          <li>
            <a class="white-text" href="https://www.facebook.com/geraldolsribeiro">
              <span class="mdi mdi-24px mdi-facebook"></span>
              geraldolsribeiro
            </a>
          </li>
        
          <li>
            <a class="white-text" href="https://github.com/geraldolsribeiro">
              <span class="mdi mdi-24px mdi-github-circle"></span>
              geraldolsribeiro
            </a>
          </li>
        
          <li>
            <a class="white-text" href="https://t.me/geraldolsribeiro">
              <span class="mdi mdi-24px mdi-telegram"></span>
              geraldolsribeiro
            </a>
          </li>
        
          <li>
            <a class="white-text" href="#ZgotmplZ">
              <span class="mdi mdi-24px mdi-skype"></span>
              geraldolsribeiro
            </a>
          </li>
        
          <li>
            <a class="white-text" href="https://codepen.io/geraldolsribeiro/">
              <span class="mdi mdi-24px mdi-codepen"></span>
              geraldolsribeiro
            </a>
          </li>
        
          <li>
            <a class="white-text" href="https://stackoverflow.com/users/554111/geraldo-luis-da-silva-ribeiro">
              <span class="mdi mdi-24px mdi-stack-overflow"></span>
              Stack overflow
            </a>
          </li>
        
        </ul>
      </div>
    </div>
  </div>

    <div class="fixed-action-btn">
      <a class="btn-floating btn-large waves-effect waves-light ">
        <i class="large material-icons">chat</i>
      </a>
      <ul>
        
        
          
          <li>
              <a class="btn-floating waves-effect waves-light green darken-4"
                title="Chame pelo whatsapp"
                target="_blank"
                href="">
              <span class="mdi mdi-24px mdi-whatsapp"></span>
            </a>
          </li>
          
        
      </ul>
    </div>


  <div class="footer-copyright">
    <div class="container">
      Feito com <i class="material-icons yellow-text" style="vertical-align: middle;">favorite</i> por Geraldo Ribeiro
    </div>
  </div>
</footer>

    

    
        






<script type="text/javascript" src="https://geraldo.dev/app.min.279059c89e89e0aaac782e66d27b61efd80e8c62da4721db90f688b8c88612bd.js" integrity="sha256-J5BZyJ6J4KqseC5m0nth79gOjGLaRyHbkPaIuMiGEr0=" media="screen"></script>


    
</body>
</html>
