<!DOCTYPE html>
<html data-head-attrs="">
<head><title>Certbot Hooks</title><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><script>const w=window,de=document.documentElement,knownColorSchemes=["dark","light"],preference=window.localStorage.getItem("nuxt-color-mode")||"system";let value=preference==="system"?getColorScheme():preference;const forcedColorMode=de.getAttribute("data-color-mode-forced");forcedColorMode&&(value=forcedColorMode),addColorScheme(value),w["__NUXT_COLOR_MODE__"]={preference,value,getColorScheme,addColorScheme,removeColorScheme};function addColorScheme(e){const o=""+e+"-mode",t="";de.classList?de.classList.add(o):de.className+=" "+o,de.setAttribute("data-"+t,e)}function removeColorScheme(e){const o=""+e+"-mode",t="";de.classList?de.classList.remove(o):de.className=de.className.replace(new RegExp(o,"g"),""),de.removeAttribute("data-"+t)}function prefersColorScheme(e){return w.matchMedia("(prefers-color-scheme"+e+")")}function getColorScheme(){if(w.matchMedia&&prefersColorScheme("").media!=="not all"){for(const e of knownColorSchemes)if(prefersColorScheme(":"+e).matches)return e}return"light"}
</script><link rel="prefetch" href="/api/_content/query/p8bryZobxr.json"><meta name="description" content="Como executar comandos juntos com o processo de obtenção de certificados SSL."><link rel="prefetch" href="/api/_content/query/WzltmnLw8Y.json"><meta name="head:count" content="6"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/entry.a3b2d25d.mjs"><link rel="preload" as="style" href="/_nuxt/entry.15604d84.css"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/default.003a3322.mjs"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/Header.52128ecc.mjs"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/NavBar.31f99be4.mjs"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/HamburgerButton.34c53960.mjs"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/logo.a1814e05.mjs"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/Footer.a3fb2bd2.mjs"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/_...slug_.66b67ee5.mjs"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/BackLink.vue_vue_type_script_setup_true_lang.98694245.mjs"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/TilDate.vue_vue_type_script_setup_true_lang.24e1d22b.mjs"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/index.40aa078e.mjs"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/TilTags.vue_vue_type_script_setup_true_lang.1691894e.mjs"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/TilRelated.vue_vue_type_script_setup_true_lang.6eb64473.mjs"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/BackLink.c07047f9.mjs"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/TilDate.9bd8697e.mjs"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/TilTags.74e68f7d.mjs"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/TilRelated.7a0b5278.mjs"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseH2.c14530ab.mjs"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseP.39d64308.mjs"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseA.1de234df.mjs"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseCode.8a6896c6.mjs"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseCode.vue_vue_type_style_index_0_lang.75cf43da.mjs"><link rel="preload" as="style" href="/_nuxt/ProseCode.53bbebb3.css"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseH3.fd6254b6.mjs"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseCodeInline.a74689f8.mjs"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseUl.40988658.mjs"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseLi.499b1814.mjs"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseBlockquote.366144f5.mjs"><link rel="prefetch" as="script" crossorigin href="/_nuxt/BigFiveProgress.5607f6f1.mjs"><link rel="prefetch" as="script" crossorigin href="/_nuxt/Card.29871ca1.mjs"><link rel="prefetch" as="script" crossorigin href="/_nuxt/Hero.1ff65218.mjs"><link rel="prefetch" as="script" crossorigin href="/_nuxt/ProseH1.bb11fba4.mjs"><link rel="prefetch" as="script" crossorigin href="/_nuxt/ProseImg.17b5e6f4.mjs"><link rel="prefetch" as="script" crossorigin href="/_nuxt/ProseStrong.5259d78c.mjs"><link rel="prefetch" as="script" crossorigin href="/_nuxt/YoutubeEmbed.c74f84a2.mjs"><link rel="prefetch" as="script" crossorigin href="/_nuxt/ContentNavigation.e556ae96.mjs"><link rel="prefetch stylesheet" href="/_nuxt/ContentNavigation.36e62e53.css"><link rel="prefetch" as="script" crossorigin href="/_nuxt/ContentSlot.ca20fcac.mjs"><link rel="prefetch" as="script" crossorigin href="/_nuxt/Markdown.daa1a207.mjs"><link rel="prefetch" as="script" crossorigin href="/_nuxt/ProseEm.bd79f18a.mjs"><link rel="prefetch" as="script" crossorigin href="/_nuxt/ProseH4.51ffedd5.mjs"><link rel="prefetch" as="script" crossorigin href="/_nuxt/ProseH5.c7003529.mjs"><link rel="prefetch" as="script" crossorigin href="/_nuxt/ProseH6.d07ffd35.mjs"><link rel="prefetch" as="script" crossorigin href="/_nuxt/ProseHr.4a966412.mjs"><link rel="prefetch" as="script" crossorigin href="/_nuxt/ProseOl.789683f3.mjs"><link rel="prefetch" as="script" crossorigin href="/_nuxt/ProseTable.744e8e94.mjs"><link rel="prefetch" as="script" crossorigin href="/_nuxt/ProseTbody.386d6e2f.mjs"><link rel="prefetch" as="script" crossorigin href="/_nuxt/ProseTd.94c8b260.mjs"><link rel="prefetch" as="script" crossorigin href="/_nuxt/ProseTh.5b31f122.mjs"><link rel="prefetch" as="script" crossorigin href="/_nuxt/ProseThead.d8c8950a.mjs"><link rel="prefetch" as="script" crossorigin href="/_nuxt/ProseTr.68a576a7.mjs"><link rel="prefetch" as="script" crossorigin href="/_nuxt/wide.2b7ca111.mjs"><link rel="prefetch" as="script" crossorigin href="/_nuxt/_...slug_.14e11fa4.mjs"><link rel="prefetch" as="script" crossorigin href="/_nuxt/_...slug_.94cbdd59.mjs"><link rel="prefetch" as="script" crossorigin href="/_nuxt/CertificateDate.vue_vue_type_script_setup_true_lang.39df55fc.mjs"><link rel="prefetch" as="script" crossorigin href="/_nuxt/index.861aa808.mjs"><link rel="prefetch" as="script" crossorigin href="/_nuxt/CertificateHeading.vue_vue_type_script_setup_true_lang.2039829d.mjs"><link rel="prefetch" as="script" crossorigin href="/_nuxt/CertificateTags.vue_vue_type_script_setup_true_lang.17365867.mjs"><link rel="prefetch" as="script" crossorigin href="/_nuxt/CertificateGrid.vue_vue_type_script_setup_true_lang.7432c8e2.mjs"><link rel="prefetch" as="script" crossorigin href="/_nuxt/GridItemTitle.a174388b.mjs"><link rel="prefetch" as="script" crossorigin href="/_nuxt/Grid.6ca2fd19.mjs"><link rel="prefetch" as="script" crossorigin href="/_nuxt/_tag_.cb81716a.mjs"><link rel="prefetch" as="script" crossorigin href="/_nuxt/index.f1e6adb1.mjs"><link rel="prefetch" as="script" crossorigin href="/_nuxt/_...slug_.5f4f11ae.mjs"><link rel="prefetch" as="script" crossorigin href="/_nuxt/index.4f97a98e.mjs"><link rel="prefetch" as="script" crossorigin href="/_nuxt/PaperHeading.vue_vue_type_script_setup_true_lang.42a9af10.mjs"><link rel="prefetch" as="script" crossorigin href="/_nuxt/PaperGrid.vue_vue_type_script_setup_true_lang.a110fd58.mjs"><link rel="prefetch" as="script" crossorigin href="/_nuxt/GridItemDescription.7c96fcba.mjs"><link rel="prefetch" as="script" crossorigin href="/_nuxt/index.25bccf5c.mjs"><link rel="prefetch" as="script" crossorigin href="/_nuxt/TilHeading.vue_vue_type_script_setup_true_lang.8dd9ad7b.mjs"><link rel="prefetch" as="script" crossorigin href="/_nuxt/TilGrid.vue_vue_type_script_setup_true_lang.4b3ae5ba.mjs"><link rel="prefetch" as="script" crossorigin href="/_nuxt/_tag_.8b76d6e3.mjs"><link rel="prefetch" as="script" crossorigin href="/_nuxt/web-socket.4c026019.mjs"><link rel="prefetch" as="script" crossorigin href="/_nuxt/error-component.25b6006f.mjs"><link rel="stylesheet" href="/_nuxt/entry.15604d84.css"><link rel="stylesheet" href="/_nuxt/ProseCode.53bbebb3.css"></head>
<body data-head-attrs=""><div id="__nuxt"><div><div class="bg-black text-slate-100"><div><div><nav class="bg-slate-800 text-blue-400 border-gray-200 px-2 sm:px-4 py-2.5"><div class="container flex flex-wrap justify-between items-center mx-auto"><a href="/" class="flex items-center"><img src="/logo.svg" class="mr-3 h-6 sm:h-9" alt="Geraldo"><span class="self-center text-xl font-semibold whitespace-nowrap hover:underline underline-offset-8"> Geraldo </span></a><div><button data-collapse-toggle="navbar-default" type="button" class="inline-flex items-center p-2 ml-3 text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200" aria-controls="navbar-default" aria-expanded="false"><span class="sr-only">Open main menu</span><svg class="w-6 h-6" aria-hidden="true" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg></button></div><div class="hidden w-full md:block md:w-auto" id="navbar-default"><ul class="flex flex-col p-4 mt-4 md:flex-row md:space-x-8 md:mt-0 md:text-sm md:font-medium md:border-0"><!--[--><li><a href="/about" class="block py-2 pr-4 pl-3 text-white hover:text-white hover:underline underline-offset-8 bg-blue-700 rounded md:bg-transparent md:text-blue-400 md:p-0" aria-current="page">About</a></li><li><a href="/til" class="block py-2 pr-4 pl-3 text-white hover:text-white hover:underline underline-offset-8 bg-blue-700 rounded md:bg-transparent md:text-blue-400 md:p-0" aria-current="page">Today I Learned</a></li><li><a href="/project" class="block py-2 pr-4 pl-3 text-white hover:text-white hover:underline underline-offset-8 bg-blue-700 rounded md:bg-transparent md:text-blue-400 md:p-0" aria-current="page">Projects</a></li><li><a href="/paper" class="block py-2 pr-4 pl-3 text-white hover:text-white hover:underline underline-offset-8 bg-blue-700 rounded md:bg-transparent md:text-blue-400 md:p-0" aria-current="page">Papers</a></li><li><a href="/certificate" class="block py-2 pr-4 pl-3 text-white hover:text-white hover:underline underline-offset-8 bg-blue-700 rounded md:bg-transparent md:text-blue-400 md:p-0" aria-current="page">Certificates</a></li><!--]--></ul></div></div></nav></div></div><div class="max-w-prose bg-slate-900 relative mx-auto overflow-hidden py-1 px-2 lg:px-8"><!--[--><div><div class="bg-slate-900 relative mx-auto max-w-prose overflow-hidden py-8 px-4 sm:px-6 lg:px-8"><div><a href="/til" class="text-slate-400 hover:text-slate-200 block cursor-pointer"><svg xmlns="http://www.w3.org/2000/svg" class="inline h-6 w-6" fill="none" viewbox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M11 17l-5-5m0 0l5-5m-5 5h12"></path></svg><!--[-->Back to TIL list<!--]--></a></div><!--[--><h1 class="text-slate-300 my-3 text-4xl font-semibold">Certbot Hooks</h1><div><div class="text-slate-600 text-md my-2"> Last uptate: <time datetime="2020-06-29T00:00:00.000Z">29-Jun-2020</time></div></div><div class="flex flex-wrap"><!--[--><a href="/til/tag/certbot" class="bg-slate-500 text-slate-900 hover:bg-blue-500 hover:text-blue-900 border border-slate-500 hover:border-blue-700 text-xs mt-2 mr-2 px-2.5 py-0.5 rounded">certbot</a><a href="/til/tag/hooks" class="bg-slate-500 text-slate-900 hover:bg-blue-500 hover:text-blue-900 border border-slate-500 hover:border-blue-700 text-xs mt-2 mr-2 px-2.5 py-0.5 rounded">hooks</a><a href="/til/tag/letsencrypt" class="bg-slate-500 text-slate-900 hover:bg-blue-500 hover:text-blue-900 border border-slate-500 hover:border-blue-700 text-xs mt-2 mr-2 px-2.5 py-0.5 rounded">letsencrypt</a><!--]--></div><div class="prose prose-lg text-slate-400 markdown"><div><h2 id="exemplo"><a href="#exemplo" class="text-slate-300 my-4 text-3xl font-semibold no-underline"><!--[-->Exemplo<!--]--></a></h2><p><!--[-->Exemplos retirados de <a href="https://www.digitalocean.com/community/tutorials/how-to-install-and-secure-the-mosquitto-mqtt-messaging-broker-on-debian-8" rel="nofollow" class="text-slate-200"><!--[-->How to Install and Secure the Mosquitto MQTT Messaging Broker on Debian 8<!--]--></a>.<!--]--></p><p><!--[-->O certbot utiliza as portas 80 (HTTP) e 443 (HTTPS).<!--]--></p><p><!--[-->Vamos usar apenas a porta 80.<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-f95134">sudo ufw allow http</span></span></code></pre><!--]--><!--[--><pre><code><span class="line"><span class="ct-f95134">sudo certbot certonly --standalone --standalone-supported-challenges http-01 -d mqtt.example.com</span></span></code></pre><!--]--><!--[--><pre><code><span class="line"><span class="ct-f95134">crontab -e</span></span></code></pre><!--]--><!--[--><pre><code><span class="line"><span class="ct-f95134">15 3 </span><span class="ct-08c6ce">*</span><span class="ct-f95134"> </span><span class="ct-08c6ce">*</span><span class="ct-f95134"> </span><span class="ct-08c6ce">*</span><span class="ct-f95134"> certbot renew --noninteractive --post-hook </span><span class="ct-a06334">&quot;systemctl restart mosquitto&quot;</span></span></code></pre><!--]--><h2 id="opções"><a href="#opções" class="text-slate-300 my-4 text-3xl font-semibold no-underline"><!--[-->Opções<!--]--></a></h2><h3 id="--pre-hook-pre_hook"><a href="#--pre-hook-pre_hook" class="text-slate-300 my-4 text-2xl font-semibold no-underline"><!--[--><code class="text-slate-300"><!--[-->--pre-hook PRE_HOOK<!--]--></code><!--]--></a></h3><p><!--[-->Comando a ser executado antes de obter um certificado.
Se existirem vários hooks iguais somente um será executado.<!--]--></p><ul><!--[--><li class="hover:bg-slate-800"><!--[-->Parar um servidor.<!--]--></li><!--]--></ul><h3 id="--post-hook-post_hook"><a href="#--post-hook-post_hook" class="text-slate-300 my-4 text-2xl font-semibold no-underline"><!--[--><code class="text-slate-300"><!--[-->--post-hook POST_HOOK<!--]--></code><!--]--></a></h3><p><!--[-->Comando a ser executado depois da tentativa de obter ou renovar o certificado.
Se existirem vários hooks iguais somente um será executado.<!--]--></p><ul><!--[--><li class="hover:bg-slate-800"><!--[-->Reiniciar/iniciar um servidor<!--]--></li><!--]--></ul><h3 id="--deploy-hook-deploy_hook"><a href="#--deploy-hook-deploy_hook" class="text-slate-300 my-4 text-2xl font-semibold no-underline"><!--[--><code class="text-slate-300"><!--[-->--deploy-hook DEPLOY_HOOK<!--]--></code><!--]--></a></h3><p><!--[-->Comando a ser executado uma vez para cada certificado emitido.
São passados as seguintes variáveis para o shell:<!--]--></p><ul><!--[--><li class="hover:bg-slate-800"><!--[--><code class="text-slate-300"><!--[-->RENEWED_LINEAGE<!--]--></code> contendo o caminho certificado (p.e.
<code class="text-slate-300"><!--[-->/etc/letsencrypt/live/geraldo.dev<!--]--></code>) que contém a chaves e o certificado.<!--]--></li><li class="hover:bg-slate-800"><!--[--><code class="text-slate-300"><!--[-->RENEWED_DOMAINS<!--]--></code> contem uma lista separada por espaço dos certificados renovados (p.e. <code class="text-slate-300"><!--[-->geraldo.dev www.geraldo.dev<!--]--></code>)<!--]--></li><!--]--></ul><h3 id="--disable-hook-validation"><a href="#--disable-hook-validation" class="text-slate-300 my-4 text-2xl font-semibold no-underline"><!--[--><code class="text-slate-300"><!--[-->--disable-hook-validation<!--]--></code><!--]--></a></h3><blockquote><!--[--><p><!--[-->Manual: Ordinarily the commands specified for --pre-
hook/--post-hook/--deploy-hook will be checked for validity, to see if the
programs being run are in the $PATH, so that mistakes can be caught early, even
when the hooks aren&#39;t being run just yet. The validation is rather simplistic
and fails if you use more advanced shell constructs, so you can use this switch
to disable it. (default: False)<!--]--></p><!--]--></blockquote><h3 id="--no-directory-hooks"><a href="#--no-directory-hooks" class="text-slate-300 my-4 text-2xl font-semibold no-underline"><!--[--><code class="text-slate-300"><!--[-->--no-directory-hooks<!--]--></code><!--]--></a></h3><blockquote><!--[--><p><!--[-->Manual: Disable running executables found in Certbot&#39;s hook directories
during renewal. (default: False)<!--]--></p><!--]--></blockquote><h2 id="referências"><a href="#referências" class="text-slate-300 my-4 text-3xl font-semibold no-underline"><!--[-->Referências<!--]--></a></h2><ul><!--[--><li class="hover:bg-slate-800"><!--[--><a href="https://www.digitalocean.com/community/tutorials/how-to-install-and-secure-the-mosquitto-mqtt-messaging-broker-on-debian-8" rel="nofollow" class="text-slate-200"><!--[-->How to Install and Secure the Mosquitto MQTT Messaging Broker on Debian 8<!--]--></a><!--]--></li><!--]--></ul><style>.ct-a06334{color:#E6DB74}.ct-08c6ce{color:#F92672}.ct-f95134{color:#F8F8F2}</style></div><!----></div><!--]--></div></div><!--]--></div><div><footer class="bg-slate-500 text-slate-400 text-center pb-16"><div class="py-2 bg-slate-800"> © Geraldo Ribeiro 2022 </div><div class="max-w-prose mx-auto mt-8 grid gap-y-8 grid-cols-3 md:grid-cols-5 lg:grid-cols-10 justify-items-center"><!--[--><a href="mailto:geraldolsribeiro@gmail.com" rel="noopener noreferrer" target="_blank" class="mx-2"><img class="h-12 w-12" title="E-mail" alt="E-mail" src="/social-email.svg"></a><a href="https://www.linkedin.com/in/geraldolsribeiro/" rel="noopener noreferrer" target="_blank" class="mx-2"><img class="h-12 w-12" title="Linkedin" alt="Linkedin" src="/social-linkedin.svg"></a><a href="https://github.com/geraldolsribeiro" rel="noopener noreferrer" target="_blank" class="mx-2"><img class="h-12 w-12" title="Github" alt="Github" src="/social-github.svg"></a><a href="https://codepen.io/geraldolsribeiro/" rel="noopener noreferrer" target="_blank" class="mx-2"><img class="h-12 w-12" title="Codepen" alt="Codepen" src="/social-codepen.svg"></a><a href="https://twitter.com/geraldo_dev" rel="noopener noreferrer" target="_blank" class="mx-2"><img class="h-12 w-12" title="Twitter" alt="Twitter" src="/social-twitter.svg"></a><a href="https://t.me/geraldolsribeiro" rel="noopener noreferrer" target="_blank" class="mx-2"><img class="h-12 w-12" title="Telegram" alt="Telegram" src="/social-telegram.svg"></a><a href="https://api.whatsapp.com/send?phone=5512982302703&amp;text=Hi%20Geraldo!" rel="noopener noreferrer" target="_blank" class="mx-2"><img class="h-12 w-12" title="Whatsapp" alt="Whatsapp" src="/social-whatsapp.svg"></a><a href="https://www.instagram.com/geraldo.dev/" rel="noopener noreferrer" target="_blank" class="mx-2"><img class="h-12 w-12" title="Instagram" alt="Instagram" src="/social-instagram.svg"></a><a href="https://www.facebook.com/geraldolsribeiro" rel="noopener noreferrer" target="_blank" class="mx-2"><img class="h-12 w-12" title="Facebook" alt="Facebook" src="/social-facebook.svg"></a><a href="https://stackoverflow.com/users/554111/geraldo-luis-da-silva-ribeiro" rel="noopener noreferrer" target="_blank" class="mx-2"><img class="h-12 w-12" title="StackOverflow" alt="StackOverflow" src="/social-stackoverflow.svg"></a><!--]--></div></footer></div></div></div></div><script>window.__NUXT__=(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am){return {data:{"content-query-1n4F4cTrDZ":{_path:"\u002Ftil\u002Fcertbot-hooks",_draft:m,_partial:m,_locale:"en",_empty:m,title:"Certbot Hooks",description:"Como executar comandos juntos com o processo de obtenção de certificados SSL.",excerpt:{type:R,children:[{type:a,tag:o,props:{id:z},children:[{type:b,value:A}]},{type:a,tag:d,props:{},children:[{type:b,value:S},{type:a,tag:t,props:{href:u,rel:[v]},children:[{type:b,value:w}]},{type:b,value:T}]},{type:a,tag:d,props:{},children:[{type:b,value:U}]},{type:a,tag:d,props:{},children:[{type:b,value:V}]},{type:a,tag:e,props:{code:B,language:j},children:[{type:a,tag:k,props:{},children:[{type:a,tag:e,props:{__ignoreMap:g},children:[{type:b,value:B}]}]}]},{type:a,tag:e,props:{code:C,language:j},children:[{type:a,tag:k,props:{},children:[{type:a,tag:e,props:{__ignoreMap:g},children:[{type:b,value:C}]}]}]},{type:a,tag:e,props:{code:D,language:j},children:[{type:a,tag:k,props:{},children:[{type:a,tag:e,props:{__ignoreMap:g},children:[{type:b,value:D}]}]}]},{type:a,tag:e,props:{code:E,language:j},children:[{type:a,tag:k,props:{},children:[{type:a,tag:e,props:{__ignoreMap:g},children:[{type:b,value:E}]}]}]},{type:a,tag:o,props:{id:F},children:[{type:b,value:G}]},{type:a,tag:h,props:{id:H},children:[{type:a,tag:c,props:{},children:[{type:b,value:I}]}]},{type:a,tag:d,props:{},children:[{type:b,value:W}]},{type:a,tag:l,props:{},children:[{type:a,tag:i,props:{},children:[{type:b,value:X}]}]},{type:a,tag:h,props:{id:J},children:[{type:a,tag:c,props:{},children:[{type:b,value:K}]}]},{type:a,tag:d,props:{},children:[{type:b,value:Y}]},{type:a,tag:l,props:{},children:[{type:a,tag:i,props:{},children:[{type:b,value:Z}]}]},{type:a,tag:h,props:{id:L},children:[{type:a,tag:c,props:{},children:[{type:b,value:M}]}]},{type:a,tag:d,props:{},children:[{type:b,value:_}]},{type:a,tag:l,props:{},children:[{type:a,tag:i,props:{},children:[{type:a,tag:c,props:{},children:[{type:b,value:$}]},{type:b,value:aa},{type:a,tag:c,props:{},children:[{type:b,value:ab}]},{type:b,value:ac}]},{type:a,tag:i,props:{},children:[{type:a,tag:c,props:{},children:[{type:b,value:ad}]},{type:b,value:ae},{type:a,tag:c,props:{},children:[{type:b,value:af}]},{type:b,value:ag}]}]},{type:a,tag:h,props:{id:p},children:[{type:a,tag:c,props:{},children:[{type:b,value:p}]}]},{type:a,tag:x,props:{},children:[{type:a,tag:d,props:{},children:[{type:b,value:ah}]}]},{type:a,tag:h,props:{id:q},children:[{type:a,tag:c,props:{},children:[{type:b,value:q}]}]},{type:a,tag:x,props:{},children:[{type:a,tag:d,props:{},children:[{type:b,value:ai}]}]},{type:a,tag:o,props:{id:N},children:[{type:b,value:O}]},{type:a,tag:l,props:{},children:[{type:a,tag:i,props:{},children:[{type:a,tag:t,props:{href:u,rel:[v]},children:[{type:b,value:w}]}]}]}]},date:"2020-06-29T00:00:00.000Z",draft:m,tags:["certbot","hooks","letsencrypt"],linenos:m,Thumbnail:"img\u002Fheaders\u002Fcertbot.png",body:{type:R,children:[{type:a,tag:o,props:{id:z},children:[{type:b,value:A}]},{type:a,tag:d,props:{},children:[{type:b,value:S},{type:a,tag:t,props:{href:u,rel:[v]},children:[{type:b,value:w}]},{type:b,value:T}]},{type:a,tag:d,props:{},children:[{type:b,value:U}]},{type:a,tag:d,props:{},children:[{type:b,value:V}]},{type:a,tag:e,props:{code:B,language:j},children:[{type:a,tag:k,props:{},children:[{type:a,tag:e,props:{__ignoreMap:g},children:[{type:a,tag:f,props:{class:y},children:[{type:a,tag:f,props:{class:n},children:[{type:b,value:"sudo ufw allow http"}]}]}]}]}]},{type:a,tag:e,props:{code:C,language:j},children:[{type:a,tag:k,props:{},children:[{type:a,tag:e,props:{__ignoreMap:g},children:[{type:a,tag:f,props:{class:y},children:[{type:a,tag:f,props:{class:n},children:[{type:b,value:"sudo certbot certonly --standalone --standalone-supported-challenges http-01 -d mqtt.example.com"}]}]}]}]}]},{type:a,tag:e,props:{code:D,language:j},children:[{type:a,tag:k,props:{},children:[{type:a,tag:e,props:{__ignoreMap:g},children:[{type:a,tag:f,props:{class:y},children:[{type:a,tag:f,props:{class:n},children:[{type:b,value:"crontab -e"}]}]}]}]}]},{type:a,tag:e,props:{code:E,language:j},children:[{type:a,tag:k,props:{},children:[{type:a,tag:e,props:{__ignoreMap:g},children:[{type:a,tag:f,props:{class:y},children:[{type:a,tag:f,props:{class:n},children:[{type:b,value:"15 3 "}]},{type:a,tag:f,props:{class:P},children:[{type:b,value:Q}]},{type:a,tag:f,props:{class:n},children:[{type:b,value:aj}]},{type:a,tag:f,props:{class:P},children:[{type:b,value:Q}]},{type:a,tag:f,props:{class:n},children:[{type:b,value:aj}]},{type:a,tag:f,props:{class:P},children:[{type:b,value:Q}]},{type:a,tag:f,props:{class:n},children:[{type:b,value:" certbot renew --noninteractive --post-hook "}]},{type:a,tag:f,props:{class:"ct-a06334"},children:[{type:b,value:"\"systemctl restart mosquitto\""}]}]}]}]}]},{type:a,tag:o,props:{id:F},children:[{type:b,value:G}]},{type:a,tag:h,props:{id:H},children:[{type:a,tag:c,props:{},children:[{type:b,value:I}]}]},{type:a,tag:d,props:{},children:[{type:b,value:W}]},{type:a,tag:l,props:{},children:[{type:a,tag:i,props:{},children:[{type:b,value:X}]}]},{type:a,tag:h,props:{id:J},children:[{type:a,tag:c,props:{},children:[{type:b,value:K}]}]},{type:a,tag:d,props:{},children:[{type:b,value:Y}]},{type:a,tag:l,props:{},children:[{type:a,tag:i,props:{},children:[{type:b,value:Z}]}]},{type:a,tag:h,props:{id:L},children:[{type:a,tag:c,props:{},children:[{type:b,value:M}]}]},{type:a,tag:d,props:{},children:[{type:b,value:_}]},{type:a,tag:l,props:{},children:[{type:a,tag:i,props:{},children:[{type:a,tag:c,props:{},children:[{type:b,value:$}]},{type:b,value:aa},{type:a,tag:c,props:{},children:[{type:b,value:ab}]},{type:b,value:ac}]},{type:a,tag:i,props:{},children:[{type:a,tag:c,props:{},children:[{type:b,value:ad}]},{type:b,value:ae},{type:a,tag:c,props:{},children:[{type:b,value:af}]},{type:b,value:ag}]}]},{type:a,tag:h,props:{id:p},children:[{type:a,tag:c,props:{},children:[{type:b,value:p}]}]},{type:a,tag:x,props:{},children:[{type:a,tag:d,props:{},children:[{type:b,value:ah}]}]},{type:a,tag:h,props:{id:q},children:[{type:a,tag:c,props:{},children:[{type:b,value:q}]}]},{type:a,tag:x,props:{},children:[{type:a,tag:d,props:{},children:[{type:b,value:ai}]}]},{type:a,tag:o,props:{id:N},children:[{type:b,value:O}]},{type:a,tag:l,props:{},children:[{type:a,tag:i,props:{},children:[{type:a,tag:t,props:{href:u,rel:[v]},children:[{type:b,value:w}]}]}]},{type:a,tag:"style",children:[{type:b,value:".ct-a06334{color:#E6DB74}.ct-08c6ce{color:#F92672}.ct-f95134{color:#F8F8F2}"}]}],toc:{title:g,searchDepth:r,depth:r,links:[{id:z,depth:r,text:A},{id:F,depth:r,text:G,children:[{id:H,depth:s,text:I},{id:J,depth:s,text:K},{id:L,depth:s,text:M},{id:p,depth:s,text:p},{id:q,depth:s,text:q}]},{id:N,depth:r,text:O}]}},_type:"markdown",_id:"content:til:certbot-hooks.md",_source:"content",_file:"til\u002Fcertbot-hooks.md",_extension:ak}},state:{"$scolor-mode":{preference:al,value:al,unknown:am,forced:m}},_errors:{},serverRendered:am,config:{public:{content:{base:"_content",tags:{p:"prose-p",a:"prose-a",blockquote:"prose-blockquote","code-inline":"prose-code-inline",code:"prose-code",em:"prose-em",h1:"prose-h1",h2:"prose-h2",h3:"prose-h3",h4:"prose-h4",h5:"prose-h5",h6:"prose-h6",hr:"prose-hr",img:"prose-img",ul:"prose-ul",ol:"prose-ol",li:"prose-li",strong:"prose-strong",table:"prose-table",thead:"prose-thead",tbody:"prose-tbody",td:"prose-td",th:"prose-th",tr:"prose-tr"},highlight:{preload:[j,"c","cpp","xml","diff","json","js","ts","css","shell","html",ak,"yaml"],theme:"monokai",apiURL:"\u002Fapi\u002F_content\u002Fhighlight"},wsUrl:g,documentDriven:m}},app:{baseURL:"\u002F",buildAssetsDir:"\u002F_nuxt\u002F",cdnURL:g}}}}("element","text","code-inline","p","code","span","","h3","li","bash","pre","ul",false,"ct-f95134","h2","--disable-hook-validation","--no-directory-hooks",2,3,"a","https:\u002F\u002Fwww.digitalocean.com\u002Fcommunity\u002Ftutorials\u002Fhow-to-install-and-secure-the-mosquitto-mqtt-messaging-broker-on-debian-8","nofollow","How to Install and Secure the Mosquitto MQTT Messaging Broker on Debian 8","blockquote","line","exemplo","Exemplo","sudo ufw allow http\n","sudo certbot certonly --standalone --standalone-supported-challenges http-01 -d mqtt.example.com\n","crontab -e\n","15 3 * * * certbot renew --noninteractive --post-hook \"systemctl restart mosquitto\"\n","opções","Opções","--pre-hook-pre_hook","--pre-hook PRE_HOOK","--post-hook-post_hook","--post-hook POST_HOOK","--deploy-hook-deploy_hook","--deploy-hook DEPLOY_HOOK","referências","Referências","ct-08c6ce","*","root","Exemplos retirados de ",".","O certbot utiliza as portas 80 (HTTP) e 443 (HTTPS).","Vamos usar apenas a porta 80.","Comando a ser executado antes de obter um certificado.\nSe existirem vários hooks iguais somente um será executado.","Parar um servidor.","Comando a ser executado depois da tentativa de obter ou renovar o certificado.\nSe existirem vários hooks iguais somente um será executado.","Reiniciar\u002Finiciar um servidor","Comando a ser executado uma vez para cada certificado emitido.\nSão passados as seguintes variáveis para o shell:","RENEWED_LINEAGE"," contendo o caminho certificado (p.e.\n","\u002Fetc\u002Fletsencrypt\u002Flive\u002Fgeraldo.dev",") que contém a chaves e o certificado.","RENEWED_DOMAINS"," contem uma lista separada por espaço dos certificados renovados (p.e. ","geraldo.dev www.geraldo.dev",")","Manual: Ordinarily the commands specified for --pre-\nhook\u002F--post-hook\u002F--deploy-hook will be checked for validity, to see if the\nprograms being run are in the $PATH, so that mistakes can be caught early, even\nwhen the hooks aren't being run just yet. The validation is rather simplistic\nand fails if you use more advanced shell constructs, so you can use this switch\nto disable it. (default: False)","Manual: Disable running executables found in Certbot's hook directories\nduring renewal. (default: False)"," ","md","system",true))</script><script type="module" src="/_nuxt/entry.a3b2d25d.mjs" crossorigin></script><script type="module" src="/_nuxt/default.003a3322.mjs" crossorigin></script><script type="module" src="/_nuxt/Header.52128ecc.mjs" crossorigin></script><script type="module" src="/_nuxt/NavBar.31f99be4.mjs" crossorigin></script><script type="module" src="/_nuxt/HamburgerButton.34c53960.mjs" crossorigin></script><script type="module" src="/_nuxt/_...slug_.66b67ee5.mjs" crossorigin></script><script type="module" src="/_nuxt/BackLink.c07047f9.mjs" crossorigin></script><script type="module" src="/_nuxt/Footer.a3fb2bd2.mjs" crossorigin></script><script type="module" src="/_nuxt/TilDate.9bd8697e.mjs" crossorigin></script><script type="module" src="/_nuxt/TilTags.74e68f7d.mjs" crossorigin></script><script type="module" src="/_nuxt/TilRelated.7a0b5278.mjs" crossorigin></script><script type="module" src="/_nuxt/ProseH2.c14530ab.mjs" crossorigin></script><script type="module" src="/_nuxt/ProseP.39d64308.mjs" crossorigin></script><script type="module" src="/_nuxt/ProseA.1de234df.mjs" crossorigin></script><script type="module" src="/_nuxt/ProseCode.8a6896c6.mjs" crossorigin></script><script type="module" src="/_nuxt/ProseH3.fd6254b6.mjs" crossorigin></script><script type="module" src="/_nuxt/ProseCodeInline.a74689f8.mjs" crossorigin></script><script type="module" src="/_nuxt/ProseUl.40988658.mjs" crossorigin></script><script type="module" src="/_nuxt/ProseLi.499b1814.mjs" crossorigin></script><script type="module" src="/_nuxt/ProseBlockquote.366144f5.mjs" crossorigin></script></body>
</html>